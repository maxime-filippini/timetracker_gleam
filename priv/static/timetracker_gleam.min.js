var f=class{withFields(e){let r=Object.keys(this).map(i=>i in e?e[i]:this[i]);return new this.constructor(...r)}},T=class{static fromArray(e,r){let i=r||new J;for(let u=e.length-1;u>=0;--u)i=new V(e[u],i);return i}[Symbol.iterator](){return new pe(this)}toArray(){return[...this]}atLeastLength(e){for(let r of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let r of this){if(e<=0)return!1;e--}return e===0}countLength(){let e=0;for(let r of this)e++;return e}};function o(t,e){return T.fromArray(t,e)}var pe=class{#e;constructor(e){this.#e=e}next(){if(this.#e instanceof J)return{done:!0};{let{head:e,tail:r}=this.#e;return this.#e=r,{value:e,done:!1}}}},J=class extends T{},V=class extends T{constructor(e,r){super(),this.head=e,this.tail=r}};var D=class t extends f{static isResult(e){return e instanceof t}},d=class extends D{constructor(e){super(),this[0]=e}isOk(){return!0}},a=class extends D{constructor(e){super(),this[0]=e}isOk(){return!1}};function de(t,e,r,i,u,l){let n=new globalThis.Error(u);n.gleam_error=t,n.module=e,n.line=r,n.fn=i;for(let s in l)n[s]=l[s];return n}var O=class extends f{};var nr=new DataView(new ArrayBuffer(8));var Ze=5,me=Math.pow(2,Ze),ir=me-1,sr=me/2,or=me/4;var ve=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),gr=new RegExp(`^([${ve}]*)`,"g"),yr=new RegExp(`([${ve}]*)$`,"g");function $e(t,e,r){return t?e:r()}var ge=class extends f{constructor(e){super(),this.all=e}};function ye(){return new ge(o([]))}var R=class extends f{constructor(e){super(),this.content=e}},h=class extends f{constructor(e,r,i,u,l,n,s){super(),this.key=e,this.namespace=r,this.tag=i,this.attrs=u,this.children=l,this.self_closing=n,this.void=s}};var W=class extends f{constructor(e,r,i){super(),this[0]=e,this[1]=r,this.as_property=i}};function Et(t,e){return new W(t,e,!1)}function Fe(t){return Et("src",t)}function E(t,e,r){return t==="area"?new h("","",t,e,o([]),!1,!0):t==="base"?new h("","",t,e,o([]),!1,!0):t==="br"?new h("","",t,e,o([]),!1,!0):t==="col"?new h("","",t,e,o([]),!1,!0):t==="embed"?new h("","",t,e,o([]),!1,!0):t==="hr"?new h("","",t,e,o([]),!1,!0):t==="img"?new h("","",t,e,o([]),!1,!0):t==="input"?new h("","",t,e,o([]),!1,!0):t==="link"?new h("","",t,e,o([]),!1,!0):t==="meta"?new h("","",t,e,o([]),!1,!0):t==="param"?new h("","",t,e,o([]),!1,!0):t==="source"?new h("","",t,e,o([]),!1,!0):t==="track"?new h("","",t,e,o([]),!1,!0):t==="wbr"?new h("","",t,e,o([]),!1,!0):new h("","",t,e,r,!1,!1)}function re(t){return new R(t)}var ne=class extends f{constructor(e){super(),this[0]=e}},y=class extends f{constructor(e){super(),this[0]=e}};var S=class extends f{};var ie=class extends f{constructor(e){super(),this[0]=e}};function be(t,e,r,i=!1){let u,l=[{prev:t,next:e,parent:t.parentNode}];for(;l.length;){let{prev:n,next:s,parent:c}=l.pop();if(s.subtree!==void 0&&(s=s.subtree()),s.content!==void 0)if(n)if(n.nodeType===Node.TEXT_NODE)n.textContent!==s.content&&(n.textContent=s.content),u??=n;else{let p=document.createTextNode(s.content);c.replaceChild(p,n),u??=p}else{let p=document.createTextNode(s.content);c.appendChild(p),u??=p}else if(s.tag!==void 0){let p=Bt({prev:n,next:s,dispatch:r,stack:l,isComponent:i});n?n!==p&&c.replaceChild(p,n):c.appendChild(p),u??=p}else s.elements!==void 0?B(s,p=>{l.unshift({prev:n,next:p,parent:c}),n=n?.nextSibling}):s.subtree!==void 0&&l.push({prev:n,next:s,parent:c})}return u}function Bt({prev:t,next:e,dispatch:r,stack:i}){let u=e.namespace||"http://www.w3.org/1999/xhtml",l=t&&t.nodeType===Node.ELEMENT_NODE&&t.localName===e.tag&&t.namespaceURI===(e.namespace||"http://www.w3.org/1999/xhtml"),n=l?t:u?document.createElementNS(u,e.tag):document.createElement(e.tag),s;if(H.has(n))s=H.get(n);else{let _=new Map;H.set(n,_),s=_}let c=l?new Set(s.keys()):null,p=l?new Set(Array.from(t.attributes,_=>_.name)):null,b=null,F=null,le=null;for(let _ of e.attrs){let m=_[0],$=_[1];if(_.as_property)n[m]!==$&&(n[m]=$),l&&p.delete(m);else if(m.startsWith("on")){let L=m.slice(2),ae=r($);s.has(L)||n.addEventListener(L,G),s.set(L,ae),l&&c.delete(L)}else if(m.startsWith("data-lustre-on-")){let L=m.slice(15),ae=r(Mt);s.has(L)||n.addEventListener(L,G),s.set(L,ae),n.setAttribute(m,$)}else m==="class"?b=b===null?$:b+" "+$:m==="style"?F=F===null?$:F+$:m==="dangerous-unescaped-html"?le=$:(n.getAttribute(m)!==$&&n.setAttribute(m,$),(m==="value"||m==="selected")&&(n[m]=$),l&&p.delete(m))}if(b!==null&&(n.setAttribute("class",b),l&&p.delete("class")),F!==null&&(n.setAttribute("style",F),l&&p.delete("style")),l){for(let _ of p)n.removeAttribute(_);for(let _ of c)s.delete(_),n.removeEventListener(_,G)}if(e.key!==void 0&&e.key!=="")n.setAttribute("data-lustre-key",e.key);else if(le!==null)return n.innerHTML=le,n;let k=n.firstChild,fe=null,Oe=null,Le=null,ce=e.children[Symbol.iterator]().next().value;l&&ce!==void 0&&ce.key!==void 0&&ce.key!==""&&(fe=new Set,Oe=Pe(t),Le=Pe(e));for(let _ of e.children)B(_,m=>{m.key!==void 0&&fe!==null?k=Ft(k,m,n,i,Le,Oe,fe):(i.unshift({prev:k,next:m,parent:n}),k=k?.nextSibling)});for(;k;){let _=k.nextSibling;n.removeChild(k),k=_}return n}var H=new WeakMap;function G(t){let e=t.currentTarget;if(!H.has(e)){e.removeEventListener(t.type,G);return}let r=H.get(e);if(!r.has(t.type)){e.removeEventListener(t.type,G);return}r.get(t.type)(t)}function Mt(t){let e=t.currentTarget,r=e.getAttribute(`data-lustre-on-${t.type}`),i=JSON.parse(e.getAttribute("data-lustre-data")||"{}"),u=JSON.parse(e.getAttribute("data-lustre-include")||"[]");switch(t.type){case"input":case"change":u.push("target.value");break}return{tag:r,data:u.reduce((l,n)=>{let s=n.split(".");for(let c=0,p=l,b=t;c<s.length;c++)c===s.length-1?p[s[c]]=b[s[c]]:(p[s[c]]??={},b=b[s[c]],p=p[s[c]]);return l},{data:i})}}function Pe(t){let e=new Map;if(t)for(let r of t.children)B(r,i=>{let u=i?.key||i?.getAttribute?.("data-lustre-key");u&&e.set(u,i)});return e}function Ft(t,e,r,i,u,l,n){for(;t&&!u.has(t.getAttribute("data-lustre-key"));){let c=t.nextSibling;r.removeChild(t),t=c}if(l.size===0)return B(e,c=>{i.unshift({prev:t,next:c,parent:r}),t=t?.nextSibling}),t;if(n.has(e.key))return console.warn(`Duplicate key found in Lustre vnode: ${e.key}`),i.unshift({prev:null,next:e,parent:r}),t;n.add(e.key);let s=l.get(e.key);if(!s&&!t)return i.unshift({prev:null,next:e,parent:r}),t;if(!s&&t!==null){let c=document.createTextNode("");return r.insertBefore(c,t),i.unshift({prev:c,next:e,parent:r}),t}return!s||s===t?(i.unshift({prev:t,next:e,parent:r}),t=t?.nextSibling,t):(r.insertBefore(s,t),i.unshift({prev:s,next:e,parent:r}),t)}function B(t,e){if(t.elements!==void 0)for(let r of t.elements)B(r,e);else t.subtree!==void 0?B(t.subtree(),e):e(t)}var se=class t{#e=null;#r=[];#t=[];#n=!1;#o=!1;#i=null;#u=null;#s=null;static start(e,r,i,u,l){if(!oe())return new a(new M);let n=r instanceof HTMLElement?r:document.querySelector(r);if(!n)return new a(new ue(r));let s=new t(i(e),u,l,n);return new d(c=>s.send(c))}constructor([e,r],i,u,l=document.body,n=!1){this.#i=e,this.#u=i,this.#s=u,this.#e=l,this.#t=r.all.toArray(),this.#n=!0,this.#o=n,window.requestAnimationFrame(()=>this.#l())}send(e){switch(!0){case e instanceof y:{this.#r.push(e[0]),this.#l();return}case e instanceof S:{this.#a();return}case e instanceof ne:{this.#c(e[0]);return}default:return}}emit(e,r){this.#e.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:r,composed:!0}))}#l(){if(this.#f(),this.#n){let e=this.#s(this.#i),r=i=>u=>{let l=i(u);l instanceof d&&this.send(new y(l[0]))};this.#n=!1,this.#e=be(this.#e,e,r,this.#o)}}#f(e=0){for(;this.#r.length;){let[r,i]=this.#u(this.#i,this.#r.shift());this.#n||=this.#i!==r,this.#i=r,this.#t=this.#t.concat(i.all.toArray())}for(;this.#t.length;)this.#t.shift()(r=>this.send(new y(r)),(r,i)=>this.emit(r,i));this.#r.length&&(e<5?this.#f(++e):window.requestAnimationFrame(()=>this.#l()))}#c(e){switch(!0){case e instanceof ie:{let r=this.#s(e[0]),i=u=>l=>{let n=u(l);n instanceof d&&this.send(new y(n[0]))};this.#r=[],this.#t=[],this.#n=!1,this.#e=be(this.#e,r,i,this.#o)}}}#a(){this.#e.remove(),this.#e=null,this.#i=null,this.#r=[],this.#t=[],this.#n=!1,this.#u=()=>{},this.#s=()=>{}}},Re=(t,e,r)=>se.start(r,e,t.init,t.update,t.view),oe=()=>globalThis.window&&window.document;var ke=class extends f{constructor(e,r,i,u){super(),this.init=e,this.update=r,this.view=i,this.on_attribute_change=u}};var ue=class extends f{constructor(e){super(),this.selector=e}},M=class extends f{};function Dt(t,e,r){return new ke(t,e,r,new O)}function We(t){return Dt(u=>[void 0,ye()],(u,l)=>[void 0,ye()],u=>t)}function He(t,e,r){return $e(!oe(),new a(new M),()=>Re(t,e,r))}function Ge(t,e){return E("h1",t,e)}function Je(t,e){return E("div",t,e)}function Ve(t,e){return E("figcaption",t,e)}function Ke(t,e){return E("figure",t,e)}function Ye(t){return E("img",t,o([]))}function Xe(){let t=We(Je(o([]),o([Ge(o([]),o([re("Hello, world!")])),Ke(o([]),o([Ye(o([Fe("https://cataas.com/cat")])),Ve(o([]),o([re("A cat!")]))]))]))),e=He(t,"#app",void 0);if(!e.isOk())throw de("assignment_no_match","timetracker_gleam",17,"main","Assignment pattern did not match",{value:e})}Xe();
