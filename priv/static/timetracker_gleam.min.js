var a=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},I=class{static fromArray(t,r){let n=r||new ve;for(let i=t.length-1;i>=0;--i)n=new Ke(t[i],n);return n}[Symbol.iterator](){return new sr(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function $(e,t){return new Ke(e,t)}function u(e,t){return I.fromArray(e,t)}var sr=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof ve)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},ve=class extends I{},Ke=class extends I{constructor(t,r){super(),this.head=t,this.tail=r}},bt=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,r,n){return Pi(this.buffer,t,r,n)}intFromSlice(t,r,n,i){return Ri(this.buffer,t,r,n,i)}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}};function Ri(e,t,r,n,i){let s=0;if(n)for(let o=t;o<r;o++)s=s*256+e[o];else for(let o=r-1;o>=t;o--)s=s*256+e[o];if(i){let l=2**((r-t)*8-1);s>=l&&(s-=l*2)}return s}function Pi(e,t,r,n){let i=new DataView(e.buffer),s=r-t;if(s===8)return i.getFloat64(t,!n);if(s===4)return i.getFloat32(t,!n);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var Oe=class e extends a{static isResult(t){return t instanceof e}},d=class extends Oe{constructor(t){super(),this[0]=t}isOk(){return!0}},m=class extends Oe{constructor(t){super(),this[0]=t}isOk(){return!1}};function y(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!mn(n)||!mn(i)||!Ki(n,i)||Ji(n,i)||Wi(n,i)||Hi(n,i)||Gi(n,i)||Vi(n,i)||Yi(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,c]=Ui(n);for(let f of l(n))r.push(c(n,f),c(i,f))}return!0}function Ui(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Ji(e,t){return e instanceof Date&&(e>t||e<t)}function Wi(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Hi(e,t){return Array.isArray(e)&&e.length!==t.length}function Gi(e,t){return e instanceof Map&&e.size!==t.size}function Vi(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Yi(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function mn(e){return typeof e=="object"&&e!==null}function Ki(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function P(e,t){return t===0?0:e%t}function le(e,t){return Math.trunc(_n(e,t))}function _n(e,t){return t===0?0:e/t}function Xe(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let l in s)o[l]=s[l];return o}var O=class extends a{constructor(t){super(),this[0]=t}},L=class extends a{};function or(e,t){if(e instanceof O){let r=e[0];return new d(r)}else return new m(t)}function F(e){return xn(e)}function es(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function A(e){return es(e,u([]))}function ts(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return A(s);{let o=n.head,l=n.tail,c=i(o)?$(o,s):s;e=l,t=i,r=c}}}function yn(e,t){return ts(e,t,u([]))}function rs(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return A(s);{let o=n.head;e=n.tail,t=i,r=$(i(o),s)}}}function b(e,t){return rs(e,t,u([]))}function ns(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return A(l);{let c=i.head,f=i.tail,_=$(s(c,o),l);e=f,t=s,r=o+1,n=_}}}function Ae(e,t){return ns(e,t,0,u([]))}function is(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new d(A(s));{let o=n.head,l=n.tail,c=i(o);if(c.isOk()){let f=c[0];e=l,t=i,r=$(f,s)}else{let f=c[0];return new m(f)}}}}function ar(e,t){return is(e,t,u([]))}function bn(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return u([]);e=r.tail,t=n-1}}function ss(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return A(s);if(n.hasLength(0))return A(s);{let l=n.head;e=n.tail,t=i-1,r=$(l,s)}}}function cr(e,t){return ss(e,t,u([]))}function os(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function U(e,t){return os(A(e),t)}function us(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function ls(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return A(n);{let i=r.head;e=r.tail,t=us(i,n)}}}function fr(e){return ls(e,u([]))}function Se(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function ce(e,t){if(e.isOk()){let r=e[0];return new d(t(r))}else{let r=e[0];return new m(r)}}function vt(e,t){if(e.isOk()){let r=e[0];return new d(r)}else{let r=e[0];return new m(t(r))}}function Z(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new m(r)}}function dr(e,t){return Z(e,t)}function Qe(e){return mr(e)}function Ot(e){return e}function fe(e){return e}function On(e,t){return Ln(e,t)}var pe=class extends a{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function _r(e){return $r(e)}function qe(e){return Cn(e)}function ds(e){return In(e)}function jn(e){return t=>{if(e.hasLength(0))return new m(u([new pe("another type",_r(t),u([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new d(s)}else return jn(n)(t)}}}function tt(e){return e.isOk()?u([]):e[0]}function En(e,t){let r=t,n=jn(u([Y,s=>ce(qe(s),F)])),i=(()=>{let s=n(r);if(s.isOk())return s[0];{let o=u(["<",_r(r),">"]),l=Qe(o);return fe(l)}})();return e.withFields({path:$(i,e.path)})}function hr(e){return t=>Z(ds(t),r=>{let i=ar(r,e);return An(i,s=>En(s,"*"))})}function An(e,t){return vt(e,r=>b(r,t))}function Y(e){return qn(e)}function T(e,t){return r=>{let n=new pe("field","nothing",u([]));return Z(Nn(r,e),i=>{let o=or(i,u([n])),l=Z(o,t);return An(l,c=>En(c,e))})}}function Sn(e,t,r){return n=>{let i=t(n),s=r(n);if(i.isOk()&&s.isOk()){let o=i[0],l=s[0];return new d(e(o,l))}else{let o=i,l=s;return new m(fr(u([tt(o),tt(l)])))}}}function jt(e,t,r,n){return i=>{let s=t(i),o=r(i),l=n(i);if(s.isOk()&&o.isOk()&&l.isOk()){let c=s[0],f=o[0],_=l[0];return new d(e(c,f,_))}else{let c=s,f=o,_=l;return new m(fr(u([tt(c),tt(f),tt(_)])))}}}var Fn=new WeakMap,xr=new DataView(new ArrayBuffer(8)),wr=0;function gr(e){let t=Fn.get(e);if(t!==void 0)return t;let r=wr++;return wr===2147483647&&(wr=0),Fn.set(e,r),r}function yr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function kr(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function zn(e){xr.setFloat64(0,e);let t=xr.getInt32(0),r=xr.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function ms(e){return kr(e.toString())}function _s(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return gr(e);if(e instanceof Date)return zn(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+M(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+M(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+yr(M(n),M(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+yr(M(o),kr(s))|0}}return r}function M(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return zn(e);case"string":return kr(e);case"bigint":return ms(e);case"object":return _s(e);case"symbol":return gr(e);case"function":return gr(e);default:return 0}}var W=5,vr=Math.pow(2,W),hs=vr-1,$s=vr/2,xs=vr/4,q=0,J=1,z=2,me=3,Or={type:z,bitmap:0,array:[]};function rt(e,t){return e>>>t&hs}function At(e,t){return 1<<rt(e,t)}function ws(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Lr(e,t){return ws(e&t-1)}function R(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function gs(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function br(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Bn(e,t,r,n,i,s){let o=M(t);if(o===n)return{type:me,hash:o,array:[{type:q,k:t,v:r},{type:q,k:i,v:s}]};let l={val:!1};return nt(jr(Or,e,o,t,r,l),e,n,i,s,l)}function nt(e,t,r,n,i,s){switch(e.type){case J:return ys(e,t,r,n,i,s);case z:return jr(e,t,r,n,i,s);case me:return bs(e,t,r,n,i,s)}}function ys(e,t,r,n,i,s){let o=rt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:J,size:e.size+1,array:R(e.array,o,{type:q,k:n,v:i})};if(l.type===q)return y(n,l.k)?i===l.v?e:{type:J,size:e.size,array:R(e.array,o,{type:q,k:n,v:i})}:(s.val=!0,{type:J,size:e.size,array:R(e.array,o,Bn(t+W,l.k,l.v,r,n,i))});let c=nt(l,t+W,r,n,i,s);return c===l?e:{type:J,size:e.size,array:R(e.array,o,c)}}function jr(e,t,r,n,i,s){let o=At(r,t),l=Lr(e.bitmap,o);if(e.bitmap&o){let c=e.array[l];if(c.type!==q){let _=nt(c,t+W,r,n,i,s);return _===c?e:{type:z,bitmap:e.bitmap,array:R(e.array,l,_)}}let f=c.k;return y(n,f)?i===c.v?e:{type:z,bitmap:e.bitmap,array:R(e.array,l,{type:q,k:n,v:i})}:(s.val=!0,{type:z,bitmap:e.bitmap,array:R(e.array,l,Bn(t+W,f,c.v,r,n,i))})}else{let c=e.array.length;if(c>=$s){let f=new Array(32),_=rt(r,t);f[_]=jr(Or,t+W,r,n,i,s);let v=0,S=e.bitmap;for(let N=0;N<32;N++){if(S&1){let Ye=e.array[v++];f[N]=Ye}S=S>>>1}return{type:J,size:c+1,array:f}}else{let f=gs(e.array,l,{type:q,k:n,v:i});return s.val=!0,{type:z,bitmap:e.bitmap|o,array:f}}}}function bs(e,t,r,n,i,s){if(r===e.hash){let o=Er(e,n);if(o!==-1)return e.array[o].v===i?e:{type:me,hash:r,array:R(e.array,o,{type:q,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:me,hash:r,array:R(e.array,l,{type:q,k:n,v:i})}}return nt({type:z,bitmap:At(e.hash,t),array:[e]},t,r,n,i,s)}function Er(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(y(t,e.array[n].k))return n;return-1}function Et(e,t,r,n){switch(e.type){case J:return ks(e,t,r,n);case z:return vs(e,t,r,n);case me:return Os(e,n)}}function ks(e,t,r,n){let i=rt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==q)return Et(s,t+W,r,n);if(y(n,s.k))return s}}function vs(e,t,r,n){let i=At(r,t);if(!(e.bitmap&i))return;let s=Lr(e.bitmap,i),o=e.array[s];if(o.type!==q)return Et(o,t+W,r,n);if(y(n,o.k))return o}function Os(e,t){let r=Er(e,t);if(!(r<0))return e.array[r]}function Ar(e,t,r,n){switch(e.type){case J:return Ls(e,t,r,n);case z:return js(e,t,r,n);case me:return Es(e,n)}}function Ls(e,t,r,n){let i=rt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===q){if(!y(s.k,n))return e}else if(o=Ar(s,t+W,r,n),o===s)return e;if(o===void 0){if(e.size<=xs){let l=e.array,c=new Array(e.size-1),f=0,_=0,v=0;for(;f<i;){let S=l[f];S!==void 0&&(c[_]=S,v|=1<<f,++_),++f}for(++f;f<l.length;){let S=l[f];S!==void 0&&(c[_]=S,v|=1<<f,++_),++f}return{type:z,bitmap:v,array:c}}return{type:J,size:e.size-1,array:R(e.array,i,o)}}return{type:J,size:e.size,array:R(e.array,i,o)}}function js(e,t,r,n){let i=At(r,t);if(!(e.bitmap&i))return e;let s=Lr(e.bitmap,i),o=e.array[s];if(o.type!==q){let l=Ar(o,t+W,r,n);return l===o?e:l!==void 0?{type:z,bitmap:e.bitmap,array:R(e.array,s,l)}:e.bitmap===i?void 0:{type:z,bitmap:e.bitmap^i,array:br(e.array,s)}}return y(n,o.k)?e.bitmap===i?void 0:{type:z,bitmap:e.bitmap^i,array:br(e.array,s)}:e}function Es(e,t){let r=Er(e,t);if(r<0)return e;if(e.array.length!==1)return{type:me,hash:e.hash,array:br(e.array,r)}}function Dn(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===q){t(s.v,s.k);continue}Dn(s,t)}}}var Ce=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Et(this.root,0,M(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Or:this.root,s=nt(i,0,M(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Ar(this.root,0,M(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Et(this.root,0,M(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Dn(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+yr(M(r),M(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&y(t.get(i,!n),n)}),r}};var As=void 0,Mn={};function xn(e){return e.toString()}function Pn(e){if(e==="")return 0;let t=Un(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function Lt(e){let t=Un(e);return t?I.fromArray(Array.from(t).map(r=>r.segment)):I.fromArray(e.match(/./gsu))}function Un(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Ln(e,t){return I.fromArray(e.split(t))}function mr(e){let t="";for(let r of e)t=t+r;return t}var Jn=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),xl=new RegExp(`^([${Jn}]*)`,"g"),wl=new RegExp(`([${Jn}]*)$`,"g");function Wn(e,t){let r=e.get(t,Mn);return r===Mn?new m(As):new d(r)}function $r(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Oe)return"Result";if(e instanceof I)return"List";if(e instanceof bt)return"BitArray";if(e instanceof Ce)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function St(e,t){return Ss(e,$r(t))}function Ss(e,t){return new m(I.fromArray([new pe(e,t,I.fromArray([]))]))}function qn(e){return typeof e=="string"?new d(e):St("String",e)}function Cn(e){return Number.isInteger(e)?new d(e):St("Int",e)}function In(e){return Array.isArray(e)?new d(I.fromArray(e)):e instanceof I?new d(e):St("List",e)}function Nn(e,t){let r=()=>St("Dict",e);if(e instanceof Ce||e instanceof WeakMap||e instanceof Map){let n=Wn(e,t);return new d(n.isOk()?new O(n[0]):new L)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Rn(e,t,()=>new d(new L)):Rn(e,t,r)}function Rn(e,t,r){try{return t in e?new d(new O(e[t])):r()}catch{return r()}}var _e=class extends a{},ee=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Ie=class extends a{constructor(t){super(),this.continuation=t}},Tt=class extends a{constructor(t,r){super(),this.element=t,this.accumulator=r}};function Cs(){return new _e}function Hn(e,t){return()=>{let r=t(e);if(r instanceof Tt){let n=r.element,i=r.accumulator;return new ee(n,Hn(i,t))}else return new _e}}function Is(e,t){let n=Hn(e,t);return new Ie(n)}function Ns(e){return Is(void 0,t=>new Tt(e(),void 0))}function Gn(e){return Ns(()=>e)}function Fs(e,t,r){for(;;){let n=e,i=t,s=r,o=n();if(o instanceof ee){let l=o[0];e=o[1],t=i,r=i(s,l)}else return s}}function zs(e,t,r){let n=e.continuation;return Fs(n,r,t)}function Vn(e){let r=zs(e,u([]),(n,i)=>$(i,n));return A(r)}function Yn(e,t){return()=>{if(t>0){let n=e();if(n instanceof _e)return new _e;{let i=n[0],s=n[1];return new ee(i,Yn(s,t-1))}}else return new _e}}function Kn(e,t){let r=e.continuation,n=Yn(r,t);return new Ie(n)}function Xn(e,t){let r=e();if(r instanceof ee){let n=r[0],i=r[1];return new ee(n,()=>Xn(i,t))}else return t()}function Sr(e,t){let r=()=>Xn(e.continuation,t.continuation);return new Ie(r)}function Bs(e){let t=()=>new ee(e(),Cs);return new Ie(t)}function Tr(e){return Bs(()=>e)}function qr(e){return Pn(e)}function Cr(e){let r=Qe(e);return fe(r)}function Zn(e,t,r){let i=Lt(e),s=bn(i,t),o=cr(s,r);return Cr(o)}function Rs(e,t,r){if(r<0)return"";if(t<0){let s=qr(e)+t;return s<0?"":Zn(e,s,r)}else return Zn(e,t,r)}function qt(e,t){if(t==="")return Lt(e);{let n=Ot(e),i=On(n,t);return b(i,fe)}}function Ps(e,t){let r=qr(t),n=le(e,r),i=P(e,r),s=Gn(t),o=Kn(s,n);return Sr(o,Tr(Rs(t,0,i)))}function Ir(e,t,r){let n=qr(e),i=t-n,s=Ps(i,r),o=Sr(s,Tr(e)),l=Vn(o);return Cr(l)}var it=class extends a{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function Js(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return A(n);{let i=r.head,s=r.tail,o=i===""||i==="."?n:i===".."&&n.hasLength(0)?u([]):i===".."&&n.atLeastLength(1)?n.tail:$(i,n);e=s,t=o}}}function Ws(e){return Js(e,u([]))}function ti(e){return Ws(qt(e,"/"))}function st(e,t,r){return e?t:r()}function ri(e){try{let t=JSON.parse(e);return new d(t)}catch(t){return new m(Vs(t,e))}}function Vs(e,t){return Ys(e)?new It:Ks(e,t)}function Ys(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Ks(e,t){let r=[Xs,Zs,eo,Qs];for(let n of r){let i=n(e,t);if(i)return i}return new te("",0)}function Xs(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Ct(r[1]);return new te(n,-1)}function Zs(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Ct(r[1]),i=Number(r[2]);return new te(n,i)}function Qs(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=to(i,s,t),l=Ct(t[o]);return new te(l,o)}function eo(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Ct(r[2]);return new te(n,0)}function Ct(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function to(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var It=class extends a{},te=class extends a{constructor(t,r){super(),this.byte=t,this.position=r}};var Fr=class extends a{constructor(t){super(),this[0]=t}};function no(e,t){return dr(ri(e),r=>{let n=t(r);return vt(n,i=>new Fr(i))})}function ni(e,t){return no(e,t)}var Ne=class extends a{constructor(t){super(),this.all=t}};function B(e){return new Ne(u([(t,r)=>e(t)]))}function C(){return new Ne(u([]))}function Nt(e){return new Ne(Se(e,u([]),(t,r)=>{let n=r.all;return U(t,n)}))}function Ft(e,t){return new Ne(b(e.all,r=>(n,i)=>r(s=>n(t(s)),i)))}var $e=class extends a{constructor(t){super(),this.content=t}},k=class extends a{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},re=class extends a{constructor(t){super(),this.subtree=t}},ot=class extends a{constructor(t,r){super(),this.elements=t,this.key=r}},ne=class extends a{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Fe=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function xe(e,t){return new ne(e,t,!1)}function co(e,t){return new ne(e,t,!0)}function si(e,t){return new Fe("on"+e,t)}function oi(e,t){if(e instanceof ne){let r=e[0],n=e[1],i=e.as_property;return new ne(r,n,i)}else{let r=e[0],n=e[1];return new Fe(r,i=>ce(n(i),t))}}function p(e){return xe("class",e)}function K(e){return xe("id",e)}function ie(e){return xe("type",e)}function se(e){return xe("value",e)}function Dr(e){return co("disabled",e)}function Mr(e){return xe("name",e)}function Rr(e){return xe("for",e)}function ui(e){return xe("href",e)}function x(e,t,r){return e==="area"?new k("","",e,t,u([]),!1,!0):e==="base"?new k("","",e,t,u([]),!1,!0):e==="br"?new k("","",e,t,u([]),!1,!0):e==="col"?new k("","",e,t,u([]),!1,!0):e==="embed"?new k("","",e,t,u([]),!1,!0):e==="hr"?new k("","",e,t,u([]),!1,!0):e==="img"?new k("","",e,t,u([]),!1,!0):e==="input"?new k("","",e,t,u([]),!1,!0):e==="link"?new k("","",e,t,u([]),!1,!0):e==="meta"?new k("","",e,t,u([]),!1,!0):e==="param"?new k("","",e,t,u([]),!1,!0):e==="source"?new k("","",e,t,u([]),!1,!0):e==="track"?new k("","",e,t,u([]),!1,!0):e==="wbr"?new k("","",e,t,u([]),!1,!0):new k("","",e,t,r,!1,!1)}function ze(e){return new $e(e)}function ge(e,t){if(e instanceof $e){let r=e.content;return new $e(r)}else if(e instanceof re){let r=e.subtree;return new re(()=>ge(r(),t))}else if(e instanceof k){let r=e.key,n=e.namespace,i=e.tag,s=e.attrs,o=e.children,l=e.self_closing,c=e.void;return new re(()=>new k(r,n,i,b(s,f=>oi(f,t)),b(o,f=>ge(f,t)),l,c))}else{let r=e.elements,n=e.key;return new re(()=>new ot(b(r,i=>ge(i,t)),n))}}var zt=class extends a{constructor(t){super(),this[0]=t}},H=class extends a{constructor(t){super(),this[0]=t}};var ye=class extends a{};var Bt=class extends a{constructor(t){super(),this[0]=t}};function Ur(e,t,r,n=!1){let i,s=[{prev:e,next:t,parent:e.parentNode}];for(;s.length;){let{prev:o,next:l,parent:c}=s.pop();if(l.subtree!==void 0&&(l=l.subtree()),l.content!==void 0)if(o)if(o.nodeType===Node.TEXT_NODE)o.textContent!==l.content&&(o.textContent=l.content),i??=o;else{let f=document.createTextNode(l.content);c.replaceChild(f,o),i??=f}else{let f=document.createTextNode(l.content);c.appendChild(f),i??=f}else if(l.tag!==void 0){let f=$o({prev:o,next:l,dispatch:r,stack:s,isComponent:n});o?o!==f&&c.replaceChild(f,o):c.appendChild(f),i??=f}else l.elements!==void 0?Be(l,f=>{s.unshift({prev:o,next:f,parent:c}),o=o?.nextSibling}):l.subtree!==void 0&&s.push({prev:o,next:l,parent:c})}return i}function $o({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(ut.has(o))l=ut.get(o);else{let E=new Map;ut.set(o,E),l=E}let c=s?new Set(l.keys()):null,f=s?new Set(Array.from(e.attributes,E=>E.name)):null,_=null,v=null,S=null;for(let E of t.attrs){let g=E[0],D=E[1];if(E.as_property)o[g]!==D&&(o[g]=D),s&&f.delete(g);else if(g.startsWith("on")){let X=g.slice(2),ir=r(D);l.has(X)||o.addEventListener(X,lt),l.set(X,ir),s&&c.delete(X)}else if(g.startsWith("data-lustre-on-")){let X=g.slice(15),ir=r(xo);l.has(X)||o.addEventListener(X,lt),l.set(X,ir),o.setAttribute(g,D)}else g==="class"?_=_===null?D:_+" "+D:g==="style"?v=v===null?D:v+D:g==="dangerous-unescaped-html"?S=D:(o.getAttribute(g)!==D&&o.setAttribute(g,D),(g==="value"||g==="selected")&&(o[g]=D),s&&f.delete(g))}if(_!==null&&(o.setAttribute("class",_),s&&f.delete("class")),v!==null&&(o.setAttribute("style",v),s&&f.delete("style")),s){for(let E of f)o.removeAttribute(E);for(let E of c)l.delete(E),o.removeEventListener(E,lt)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(S!==null)return o.innerHTML=S,o;let N=o.firstChild,Ye=null,pn=null,dn=null,nr=t.children[Symbol.iterator]().next().value;s&&nr!==void 0&&nr.key!==void 0&&nr.key!==""&&(Ye=new Set,pn=li(e),dn=li(t));for(let E of t.children)Be(E,g=>{g.key!==void 0&&Ye!==null?N=wo(N,g,o,n,dn,pn,Ye):(n.unshift({prev:N,next:g,parent:o}),N=N?.nextSibling)});for(;N;){let E=N.nextSibling;o.removeChild(N),N=E}return o}var ut=new WeakMap;function lt(e){let t=e.currentTarget;if(!ut.has(t)){t.removeEventListener(e.type,lt);return}let r=ut.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,lt);return}r.get(e.type)(e)}function xo(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let c=0,f=s,_=e;c<l.length;c++)c===l.length-1?f[l[c]]=_[l[c]]:(f[l[c]]??={},_=_[l[c]],f=f[l[c]]);return s},{data:n})}}function li(e){let t=new Map;if(e)for(let r of e.children)Be(r,n=>{let i=n?.key||n?.getAttribute?.("data-lustre-key");i&&t.set(i,n)});return t}function wo(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let c=e.nextSibling;r.removeChild(e),e=c}if(s.size===0)return Be(t,c=>{n.unshift({prev:e,next:c,parent:r}),e=e?.nextSibling}),e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let c=document.createTextNode("");return r.insertBefore(c,e),n.unshift({prev:c,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function Be(e,t){if(e.elements!==void 0)for(let r of e.elements)Be(r,t);else e.subtree!==void 0?Be(e.subtree(),t):t(e)}var Dt=class e{#e=null;#r=[];#t=[];#n=!1;#o=!1;#i=null;#u=null;#s=null;static start(t,r,n,i,s){if(!De())return new m(new Me);let o=r instanceof HTMLElement?r:document.querySelector(r);if(!o)return new m(new Mt(r));let l=new e(n(t),i,s,o);return new d(c=>l.send(c))}constructor([t,r],n,i,s=document.body,o=!1){this.#i=t,this.#u=n,this.#s=i,this.#e=s,this.#t=r.all.toArray(),this.#n=!0,this.#o=o,window.requestAnimationFrame(()=>this.#l())}send(t){switch(!0){case t instanceof H:{this.#r.push(t[0]),this.#l();return}case t instanceof ye:{this.#f();return}case t instanceof zt:{this.#c(t[0]);return}default:return}}emit(t,r){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:r,composed:!0}))}#l(){if(this.#a(),this.#n){let t=this.#s(this.#i),r=n=>i=>{let s=n(i);s instanceof d&&this.send(new H(s[0]))};this.#n=!1,this.#e=Ur(this.#e,t,r,this.#o)}}#a(t=0){for(;this.#r.length;){let[r,n]=this.#u(this.#i,this.#r.shift());this.#n||=this.#i!==r,this.#i=r,this.#t=this.#t.concat(n.all.toArray())}for(;this.#t.length;)this.#t.shift()(r=>this.send(new H(r)),(r,n)=>this.emit(r,n));this.#r.length&&(t<5?this.#a(++t):window.requestAnimationFrame(()=>this.#l()))}#c(t){switch(!0){case t instanceof Bt:{let r=this.#s(t[0]),n=i=>s=>{let o=i(s);o instanceof d&&this.send(new H(o[0]))};this.#r=[],this.#t=[],this.#n=!1,this.#e=Ur(this.#e,r,n,this.#o)}}}#f(){this.#e.remove(),this.#e=null,this.#i=null,this.#r=[],this.#t=[],this.#n=!1,this.#u=()=>{},this.#s=()=>{}}},ai=(e,t,r)=>Dt.start(r,t,e.init,e.update,e.view),De=()=>globalThis.window&&window.document;var ci=e=>e.preventDefault();var Jr=class extends a{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Mt=class extends a{constructor(t){super(),this.selector=t}},Me=class extends a{};function fi(e,t,r){return new Jr(e,t,r,new L)}function pi(e,t,r){return st(!De(),new m(new Me),()=>ai(e,t,r))}function w(e){return ze(e)}function mi(e,t){return x("h1",e,t)}function _i(e,t){return x("h2",e,t)}function hi(e,t){return x("nav",e,t)}function h(e,t){return x("div",e,t)}function $i(e,t){return x("li",e,t)}function Rt(e,t){return x("p",e,t)}function xi(e,t){return x("ul",e,t)}function wi(e,t){return x("a",e,t)}function Pt(e,t){return x("table",e,t)}function Ut(e,t){return x("tbody",e,t)}function oe(e,t){return x("td",e,t)}function Jt(e,t){return x("th",e,t)}function Wt(e,t){return x("thead",e,t)}function Re(e,t){return x("tr",e,t)}function be(e,t){return x("button",e,t)}function Ht(e,t){return x("form",e,t)}function Pe(e){return x("input",e,u([]))}function Ue(e,t){return x("label",e,t)}function gi(e,t){return x("option",e,u([ze(t)]))}function yi(e,t){return x("select",e,t)}var go={handle_external_links:!1,handle_internal_links:!0},Xp=window?.location?.href;var Wr=(e,t=go)=>{document.addEventListener("click",r=>{let n=ki(r.target);if(n)try{let i=new URL(n.href),s=bi(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=bi(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var ki=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:ki(e.parentElement),bi=e=>new it(e.protocol?new O(e.protocol.slice(0,-1)):new L,new L,e.hostname?new O(e.hostname):new L,e.port?new O(Number(e.port)):new L,e.pathname,e.search?new O(e.search.slice(1)):new L,e.hash?new O(e.hash.slice(1)):new L);function vi(e){return B(t=>st(!De(),void 0,()=>Wr(r=>{let i=e(r);return t(i)})))}function Hr(){return h(u([p("border-b-2 border-b-surface-0")]),u([]))}function Oi(){return h(u([]),u([mi(u([p("text-3xl")]),u([ze("Time tracker")])),Rt(u([]),u([ze("A small app to track your time spent on work items.")]))]))}function Gr(){let e=window.localStorage.getItem("count"),t=window.localStorage.getItem("work_items"),r=window.localStorage.getItem("records");e=e?JSON.parse(e):0,t=t?JSON.parse(t):[],r=r?JSON.parse(r):[];let n=JSON.stringify({count:e,work_items:t,records:r});return console.log(n),n}function Vr(e){return e instanceof ve?[]:[e.head].concat(Vr(e.tail))}function Gt(e){let t=Vr(e);window.localStorage.setItem("work_items",JSON.stringify(t))}function Yr(e){let t=Vr(e);window.localStorage.setItem("records",JSON.stringify(t))}function Kr(e){window.requestAnimationFrame(()=>{window.setTimeout(()=>document.getElementById(e).focus(),0)})}function Xr(e,t){window.__timer=window.setInterval(t,e)}function Zr(e){window.clearInterval(window.__timer)}var ke=class extends a{},ct=class extends a{},Je=class extends a{};function Li(e){let t=ti(e.path);return t.hasLength(1)&&t.head==="work-items"?new ct:t.hasLength(1)&&t.head==="analytics"?new Je:new ke}function ji(){return new ke}var ue=class extends a{constructor(t,r,n){super(),this.hours=t,this.minutes=r,this.seconds=n}};function en(e){let t=P(e,60),r=P(le(e,60),60),n=le(le(e,60),60);return new ue(n,r,t)}function Vt(e,t){let r=(()=>{let s=e.hours;return s===0&&t?"":F(s)+":"})(),n=(()=>{let s=e.minutes,o=e.hours;return s===0&&o===0&&t?"":o===0&&t?F(s)+":":Ir(F(s),2,"0")+":"})(),i=(()=>{let s=e.seconds;return e.minutes===0&&t?F(s):Ir(F(s),2,"0")})();return r+n+i}var ft=class extends a{constructor(t,r){super(),this.id=t,this.label=r}},pt=class extends a{constructor(t,r,n){super(),this.time=t,this.work_item_id=r,this.description=n}},rn=class extends a{constructor(t,r,n){super(),this.current_route=t,this.work_items=r,this.records=n}},nn=class extends a{constructor(t,r,n){super(),this.count=t,this.work_items=r,this.records=n}};function ko(){let e=Sn((n,i)=>new ft(n,i),T("id",Y),T("label",Y)),t=jt((n,i,s)=>new ue(n,i,s),T("hours",qe),T("minutes",qe),T("seconds",qe)),r=jt((n,i,s)=>new pt(n,i,s),T("time",t),T("work_item_id",Y),T("description",Y));return jt((n,i,s)=>new nn(n,i,s),T("count",qe),T("work_items",hr(e)),T("records",hr(r)))}function Ai(){let e=Gr(),t=ni(e,ko());if(!t.isOk())throw Xe("assignment_no_match","data/global",65,"init","Assignment pattern did not match",{value:t});let r=t[0];return new rn(ji(),r.work_items,r.records)}var dt=class extends a{constructor(t){super(),this.records=t}};function Si(e){return new dt(e.records)}function Ti(e,t){return[e,C()]}function vo(e){let t=(()=>{let n=u(["Work item ID","Description","Time"]);return b(n,i=>Jt(u([p("w-1/3")]),u([w(i)])))})(),r=(()=>{let n=e.records;return Ae(n,(i,s)=>{let o=P(s,2)===0?"":"bg-surface-0";return Re(u([p(o)]),u([oe(u([p("text-center")]),u([w(i.work_item_id)])),oe(u([p("text-center")]),u([w(i.description)])),oe(u([p("text-center")]),u([w(Vt(i.time,!1))]))]))})})();return Pt(u([p("w-full table-auto rounded-md")]),u([Wt(u([p("")]),u([Re(u([p("bg-surface-2 text-white")]),t)])),Ut(u([]),r)]))}function qi(e){return h(u([p("flex flex-col gap-8 mt-4")]),u([Rt(u([p("italic")]),u([w("This is a work in progress. For now, this only shows the full list of records, but it will be more fleshed out at a later stage.")])),vo(e)]))}function on(e,t){return si(e,t)}function mt(e){return on("click",t=>new d(e))}function Lo(e){let t=e;return T("target",T("value",Y))(t)}function We(e){return on("input",t=>{let r=Lo(t);return ce(r,e)})}function _t(e){return on("submit",t=>{let r=ci(t);return new d(e)})}var un=class extends a{constructor(t,r,n,i,s){super(),this.active=t,this.current_time=r,this.id=n,this.description=i,this.work_items=s}},Yt=class extends a{},Kt=class extends a{},Xt=class extends a{constructor(t){super(),this.id=t}},ln=class extends a{constructor(t){super(),this.desc=t}},Zt=class extends a{},He=class extends a{constructor(t){super(),this.record=t}};function Ii(e){let t=(()=>{let r=e.work_items;return r.atLeastLength(1)?r.head.id:""})();return new un(!1,0,t,"",e.work_items)}function Ni(e,t){if(t instanceof Zt)return[e.withFields({current_time:e.current_time+1}),C()];if(t instanceof Yt)return[e.withFields({active:!0,current_time:0}),B(r=>Xr(1e3,()=>r(new Zt)))];if(t instanceof Kt)return[e.withFields({active:!1}),B(r=>{let n=new pt(en(e.current_time),e.id,e.description);return Zr("__timer"),r(new He(n))})];if(t instanceof He)return[e,C()];if(t instanceof Xt){let r=t.id;return[e.withFields({id:r}),C()]}else{let r=t.desc;return[e.withFields({description:r}),C()]}}function jo(e){let t=be(u([p("rounded-full sm:h-4/5 h-32 aspect-square bg-green-500 hover:bg-green-600 duration-200 border-[3px] border-green-900 flex items-center justify-center"),ie("submit")]),u([h(u([p("ml-2 border-t-[15px] border-t-transparent border-b-transparent w-0 h-0 border-b-[15px] border-l-[25px] border-white")]),u([]))])),r=en(e.current_time),n=r instanceof ue&&r.hours===0&&r.minutes===0?"text-3xl":r instanceof ue&&r.hours===0?"text-2xl":"text-xl",i=be(u([p("rounded-full sm:h-4/5 h-32 aspect-square bg-red-500 hover:bg-red-600 duration-200 border-[3px] border-red-900 flex items-center justify-center"),ie("submit")]),u([h(u([p("text-white text-semibold "+n)]),u([w(Vt(r,!0))]))]));return e.active?i:t}function Fi(e){let t=e.active?_t(new Kt):_t(new Yt);return h(u([p("grow")]),u([h(u([p("w-full sm:h-32 h-96 rounded-lg bg-surface-0 flex sm:flex-nowrap  flex-wrap sm:px-8 py-2 items-center justify-center")]),u([Ht(u([p("px-8 flex justify-center gap-8 items-center h-full sm:flex-nowrap flex-wrap"),t]),u([h(u([p("flex flex-col gap-4 sm:w-full w-64")]),u([h(u([p("flex gap-2 sm:flex-nowrap flex-wrap justify-center")]),u([Ue(u([Rr("work-item"),p("sm:min-w-32 min-w-full text-center")]),u([w("Work item")])),yi(u([Mr("selected-work-item"),K("work-item"),Dr(e.active),p("text-bg pl-2 rounded-md sm:min-w-64 min-w-full"),se(e.id),We(r=>new Xt(r))]),(()=>{let r=e.work_items;return b(r,n=>gi(u([se(n.id)]),n.label))})())])),h(u([p("flex gap-2 sm:flex-nowrap flex-wrap justify-center")]),u([Ue(u([Rr("work-item"),p("sm:min-w-32 min-w-full text-center")]),u([w("Description")])),Pe(u([Mr("task-description"),K("task-description"),Dr(e.active),p("text-bg pl-2 rounded-md sm:min-w-64 min-w-full"),se(e.description),We(r=>new ln(r))]))]))])),h(u([p("sm:grow-0 sm:h-full grow flex items-center justify-center")]),u([jo(e)]))]))]))]))}var an=class extends a{constructor(t,r,n,i){super(),this.modal_open=t,this.work_items=r,this.new_work_item_id=n,this.new_work_item_label=i}},Qt=class extends a{},Ge=class extends a{},er=class extends a{constructor(t){super(),this.id=t}},tr=class extends a{constructor(t){super(),this.label=t}},ht=class extends a{constructor(t,r){super(),this.id=t,this.label=r}},Ve=class extends a{constructor(t){super(),this.work_item=t}};function zi(e){return new an(!1,e.work_items,"","")}function Bi(e,t){if(t instanceof Qt)return[e.withFields({modal_open:!0,new_work_item_id:"",new_work_item_label:""}),B(r=>Kr("id-work-item"))];if(t instanceof Ve){let r=t.work_item,n=(()=>{let i=e.work_items;return yn(i,s=>s.id!==r.id)})();return[e.withFields({work_items:n}),B(i=>Gt(n))]}else if(t instanceof er){let r=t.id;return[e.withFields({new_work_item_id:r}),C()]}else if(t instanceof tr){let r=t.label;return[e.withFields({new_work_item_label:r}),C()]}else{if(t instanceof Ge)return[e.withFields({modal_open:!1}),C()];{let r=t.id,n=t.label,i=new ft(r,n),s=U(e.work_items,u([i]));return[e.withFields({work_items:s}),B(o=>(Gt(s),o(new Ge)))]}}}function Ao(e){let t=(()=>{let n=u(["ID","Label","Action"]);return b(n,i=>Jt(u([p("w-1/3")]),u([w(i)])))})(),r=(()=>{let n=e.work_items;return Ae(n,(i,s)=>{let o=P(s,2)===0?"":"bg-surface-0";return Re(u([p(o)]),u([oe(u([p("text-center")]),u([w(i.id)])),oe(u([p("text-center")]),u([w(i.label)])),oe(u([p("text-center")]),u([h(u([p("")]),u([be(u([p("px-4 py-1 my-3 hover:bg-red-700 bg-red-500 text-white duration-300 rounded-full"),mt(new Ve(i))]),u([w("Delete")]))]))]))]))})})();return Pt(u([p("w-full table-auto rounded-md")]),u([Wt(u([p("")]),u([Re(u([p("bg-surface-2 text-white")]),t)])),Ut(u([]),r)]))}function So(e){let t=e.modal_open?["block",""]:["hidden","scale-75"],r=t[0],n=t[1],i=h(u([K("modal-add-work-item"),p("max-w-5xl w-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-surface-1 opacity-100 rounded-lg flex flex-col gap-4 p-4 z-999 duration-2000 transition "+n)]),u([_i(u([p("text-xl font-semibold")]),u([w("Add new work item")])),Ht(u([p("flex flex-col gap-4"),_t(new ht(e.new_work_item_id,e.new_work_item_label))]),u([h(u([p("flex justify-center gap-4")]),u([Ue(u([p("mb-1 mt-1 min-w-32")]),u([w("ID:")])),Pe(u([K("id-work-item"),ie("text"),p("text-bg rounded-md grow py-1 px-4"),se(e.new_work_item_id),We(o=>new er(o))]))])),h(u([p("flex justify-center gap-4")]),u([Ue(u([p("mb-1 mt-1 min-w-32")]),u([w("Label:")])),Pe(u([K("label-work-item"),ie("text"),p("text-bg rounded-md grow px-4 py-1"),se(e.new_work_item_label),We(o=>new tr(o))]))])),h(u([p("flex w-full gap-4")]),u([Pe(u([p("h-8 rounded-lg bg-teal-300 text-bg w-1/2 cursor-pointer"),ie("submit"),se("Save")])),be(u([p("h-8 rounded-lg bg-red-400 text-bg w-1/2"),mt(new Ge),ie("button")]),u([w("Cancel")]))]))]))])),s=h(u([K("modal-bg"),p("bg-bg opacity-90 w-screen h-screen z-990"),mt(new Ge)]),u([]));return h(u([K("modal-add-work-item-container"),p("absolute top-0 left-0 w-screen h-screen overflow-hidden z-1 flex flex-col "+r)]),u([h(u([p("w-full h-full relative")]),u([s,i]))]))}function Di(e){return h(u([p("flex flex-col gap-4")]),u([Ao(e),be(u([p("bg-catp-green w-full h-8 rounded-lg text-bg"),mt(new Qt)]),u([w("Add new item")])),So(e)]))}var cn=class extends a{constructor(t,r,n,i){super(),this.global=t,this.tracker=r,this.work_items=n,this.analytics=i}},rr=class extends a{constructor(t){super(),this[0]=t}},$t=class extends a{constructor(t){super(),this.work_items=t}},fn=class extends a{constructor(t){super(),this.rec=t}},wt=class extends a{constructor(t){super(),this[0]=t}},gt=class extends a{constructor(t){super(),this[0]=t}},yt=class extends a{constructor(t){super(),this[0]=t}},xt=class extends a{constructor(t,r,n){super(),this.url=t,this.title=r,this.route=n}};function qo(e){let t=Li(e);return new rr(t)}function Co(e){let t=Ai(),r=new cn(t,Ii(t),zi(t),Si(t)),n=Nt(u([vi(qo)]));return[r,n]}function Io(e,t){let r=(()=>{if(t instanceof rr){let s=t[0];return[e.withFields({global:e.global.withFields({current_route:s})}),C()]}else if(t instanceof yt){let s=t[0],o=Ti(e.analytics,s),l=o[0],c=o[1];return[e.withFields({analytics:l}),Ft(c,f=>new yt(f))]}else if(t instanceof wt){let s=t[0],o=Ni(e.tracker,s),l=o[0],c=o[1],f=Ft(c,v=>new wt(v)),_=B(v=>{if(s instanceof He){let S=s.record;v(new fn(S))}});return[e.withFields({tracker:l}),Nt(u([f,_]))]}else if(t instanceof gt){let s=t[0],o=Bi(e.work_items,s),l=o[0],c=o[1],f=Ft(c,v=>new gt(v)),_=v=>s instanceof ht?v(new $t(l.work_items)):s instanceof Ve?v(new $t(l.work_items)):void 0;return[e.withFields({work_items:l}),Nt(u([f,B(_)]))]}else if(t instanceof $t){let s=t.work_items,o=e.global.withFields({work_items:s}),l=e.tracker.withFields({work_items:s});return[e.withFields({global:o,tracker:l}),C()]}else{let s=t.rec,o=U(e.global.records,u([s])),l=e.global.withFields({records:o}),c=new dt(o);return[e.withFields({global:l,analytics:c}),B(f=>Yr(o))]}})(),n=r[0],i=r[1];return[n,i]}function No(e){return h(u([p("w-full h-8 flex flex-col justify-center")]),u([hi(u([p("w-full")]),u([xi(u([p("flex w-full")]),b(e,r=>$i(u([p("mx-auto")]),u([wi(u([ui(r.url)]),u([w(r.title)]))]))))]))]))}function Fo(e){let t=u([new xt("/","Tracker",new ke),new xt("/work-items","Work Items",new ct),new xt("/analytics","Analytics",new Je)]),r=(()=>{let n=e.global.current_route;if(n instanceof ke){let i=Fi(e.tracker);return ge(i,s=>new wt(s))}else if(n instanceof Je){let i=qi(e.analytics);return ge(i,s=>new yt(s))}else{let i=Di(e.work_items);return ge(i,s=>new gt(s))}})();return h(u([p("text-white container p-4 mx-auto max-w-5xl sm:mt-8 mt-4 flex flex-col gap-4")]),u([Oi(),Hr(),No(t),Hr(),r]))}function Mi(){let e=fi(Co,Io,Fo),t=pi(e,"#app",void 0);if(!t.isOk())throw Xe("assignment_no_match","timetracker_gleam",189,"main","Assignment pattern did not match",{value:t})}Mi();
