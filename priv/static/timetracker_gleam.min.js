var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},z=class{static fromArray(t,r){let n=r||new De;for(let i=t.length-1;i>=0;--i)n=new me(t[i],n);return n}[Symbol.iterator](){return new st(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function g(e,t){return new me(e,t)}function u(e,t){return z.fromArray(e,t)}var st=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof De)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},De=class extends z{},me=class extends z{constructor(t,r){super(),this.head=t,this.tail=r}},Ue=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,r,n){return Jr(this.buffer,t,r,n)}intFromSlice(t,r,n,i){return Gr(this.buffer,t,r,n,i)}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}},Pe=class{constructor(t){this.value=t}};function Gr(e,t,r,n,i){let s=0;if(n)for(let o=t;o<r;o++)s=s*256+e[o];else for(let o=r-1;o>=t;o--)s=s*256+e[o];if(i){let l=2**((r-t)*8-1);s>=l&&(s-=l*2)}return s}function Jr(e,t,r,n){let i=new DataView(e.buffer),s=r-t;if(s===8)return i.getFloat64(t,!n);if(s===4)return i.getFloat32(t,!n);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var he=class e extends c{static isResult(t){return t instanceof e}},d=class extends he{constructor(t){super(),this[0]=t}isOk(){return!0}},m=class extends he{constructor(t){super(),this[0]=t}isOk(){return!1}};function x(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Dt(n)||!Dt(i)||!tn(n,i)||Yr(n,i)||Kr(n,i)||Xr(n,i)||Zr(n,i)||Qr(n,i)||en(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,f]=Vr(n);for(let a of l(n))r.push(f(n,a),f(i,a))}return!0}function Vr(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Yr(e,t){return e instanceof Date&&(e>t||e<t)}function Kr(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Xr(e,t){return Array.isArray(e)&&e.length!==t.length}function Zr(e,t){return e instanceof Map&&e.size!==t.size}function Qr(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function en(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Dt(e){return typeof e=="object"&&e!==null}function tn(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function _e(e,t){return t===0?0:e%t}function ot(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let l in s)o[l]=s[l];return o}var O=class extends c{constructor(t){super(),this[0]=t}},y=class extends c{};var Ut=new WeakMap,lt=new DataView(new ArrayBuffer(8)),ct=0;function ft(e){let t=Ut.get(e);if(t!==void 0)return t;let r=ct++;return ct===2147483647&&(ct=0),Ut.set(e,r),r}function at(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function dt(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Pt(e){lt.setFloat64(0,e);let t=lt.getInt32(0),r=lt.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function nn(e){return dt(e.toString())}function sn(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return ft(e);if(e instanceof Date)return Pt(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+q(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+q(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+at(q(n),q(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+at(q(o),dt(s))|0}}return r}function q(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Pt(e);case"string":return dt(e);case"bigint":return nn(e);case"object":return sn(e);case"symbol":return ft(e);case"function":return ft(e);default:return 0}}var F=5,mt=Math.pow(2,F),on=mt-1,un=mt/2,ln=mt/4,L=0,I=1,A=2,V=3,ht={type:A,bitmap:0,array:[]};function $e(e,t){return e>>>t&on}function We(e,t){return 1<<$e(e,t)}function cn(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function _t(e,t){return cn(e&t-1)}function T(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function fn(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function pt(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Rt(e,t,r,n,i,s){let o=q(t);if(o===n)return{type:V,hash:o,array:[{type:L,k:t,v:r},{type:L,k:i,v:s}]};let l={val:!1};return we(xt(ht,e,o,t,r,l),e,n,i,s,l)}function we(e,t,r,n,i,s){switch(e.type){case I:return an(e,t,r,n,i,s);case A:return xt(e,t,r,n,i,s);case V:return pn(e,t,r,n,i,s)}}function an(e,t,r,n,i,s){let o=$e(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:I,size:e.size+1,array:T(e.array,o,{type:L,k:n,v:i})};if(l.type===L)return x(n,l.k)?i===l.v?e:{type:I,size:e.size,array:T(e.array,o,{type:L,k:n,v:i})}:(s.val=!0,{type:I,size:e.size,array:T(e.array,o,Rt(t+F,l.k,l.v,r,n,i))});let f=we(l,t+F,r,n,i,s);return f===l?e:{type:I,size:e.size,array:T(e.array,o,f)}}function xt(e,t,r,n,i,s){let o=We(r,t),l=_t(e.bitmap,o);if(e.bitmap&o){let f=e.array[l];if(f.type!==L){let h=we(f,t+F,r,n,i,s);return h===f?e:{type:A,bitmap:e.bitmap,array:T(e.array,l,h)}}let a=f.k;return x(n,a)?i===f.v?e:{type:A,bitmap:e.bitmap,array:T(e.array,l,{type:L,k:n,v:i})}:(s.val=!0,{type:A,bitmap:e.bitmap,array:T(e.array,l,Rt(t+F,a,f.v,r,n,i))})}else{let f=e.array.length;if(f>=un){let a=new Array(32),h=$e(r,t);a[h]=xt(ht,t+F,r,n,i,s);let C=0,j=e.bitmap;for(let E=0;E<32;E++){if(j&1){let de=e.array[C++];a[E]=de}j=j>>>1}return{type:I,size:f+1,array:a}}else{let a=fn(e.array,l,{type:L,k:n,v:i});return s.val=!0,{type:A,bitmap:e.bitmap|o,array:a}}}}function pn(e,t,r,n,i,s){if(r===e.hash){let o=$t(e,n);if(o!==-1)return e.array[o].v===i?e:{type:V,hash:r,array:T(e.array,o,{type:L,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:V,hash:r,array:T(e.array,l,{type:L,k:n,v:i})}}return we({type:A,bitmap:We(e.hash,t),array:[e]},t,r,n,i,s)}function $t(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(x(t,e.array[n].k))return n;return-1}function Re(e,t,r,n){switch(e.type){case I:return dn(e,t,r,n);case A:return mn(e,t,r,n);case V:return hn(e,n)}}function dn(e,t,r,n){let i=$e(r,t),s=e.array[i];if(s!==void 0){if(s.type!==L)return Re(s,t+F,r,n);if(x(n,s.k))return s}}function mn(e,t,r,n){let i=We(r,t);if(!(e.bitmap&i))return;let s=_t(e.bitmap,i),o=e.array[s];if(o.type!==L)return Re(o,t+F,r,n);if(x(n,o.k))return o}function hn(e,t){let r=$t(e,t);if(!(r<0))return e.array[r]}function wt(e,t,r,n){switch(e.type){case I:return _n(e,t,r,n);case A:return xn(e,t,r,n);case V:return $n(e,n)}}function _n(e,t,r,n){let i=$e(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===L){if(!x(s.k,n))return e}else if(o=wt(s,t+F,r,n),o===s)return e;if(o===void 0){if(e.size<=ln){let l=e.array,f=new Array(e.size-1),a=0,h=0,C=0;for(;a<i;){let j=l[a];j!==void 0&&(f[h]=j,C|=1<<a,++h),++a}for(++a;a<l.length;){let j=l[a];j!==void 0&&(f[h]=j,C|=1<<a,++h),++a}return{type:A,bitmap:C,array:f}}return{type:I,size:e.size-1,array:T(e.array,i,o)}}return{type:I,size:e.size,array:T(e.array,i,o)}}function xn(e,t,r,n){let i=We(r,t);if(!(e.bitmap&i))return e;let s=_t(e.bitmap,i),o=e.array[s];if(o.type!==L){let l=wt(o,t+F,r,n);return l===o?e:l!==void 0?{type:A,bitmap:e.bitmap,array:T(e.array,s,l)}:e.bitmap===i?void 0:{type:A,bitmap:e.bitmap^i,array:pt(e.array,s)}}return x(n,o.k)?e.bitmap===i?void 0:{type:A,bitmap:e.bitmap^i,array:pt(e.array,s)}:e}function $n(e,t){let r=$t(e,t);if(r<0)return e;if(e.array.length!==1)return{type:V,hash:e.hash,array:pt(e.array,r)}}function Wt(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===L){t(s.v,s.k);continue}Wt(s,t)}}}var xe=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Re(this.root,0,q(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?ht:this.root,s=we(i,0,q(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=wt(this.root,0,q(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Re(this.root,0,q(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Wt(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+at(q(r),q(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&x(t.get(i,!n),n)}),r}};var wn=void 0;function Ht(e){return/^[-+]?(\d+)$/.test(e)?new d(parseInt(e)):new m(wn)}function Gt(e){return e.toString()}function gt(e){let t=gn(e);return t?z.fromArray(Array.from(t).map(r=>r.segment)):z.fromArray(e.match(/./gsu))}function gn(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Jt(e,t){return z.fromArray(e.split(t))}var Vt=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),ss=new RegExp(`^([${Vt}]*)`,"g"),os=new RegExp(`([${Vt}]*)$`,"g");function Yt(e){console.log(e)}function Kt(e){typeof process=="object"&&process.stderr?.write?process.stderr.write(e+`
`):typeof Deno=="object"?Deno.stderr.writeSync(new TextEncoder().encode(e+`
`)):console.log(e)}function B(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return yn(e);if(t==="bigint"||t==="number")return e.toString();if(Array.isArray(e))return`#(${e.map(B).join(", ")})`;if(e instanceof z)return Ln(e);if(e instanceof Pe)return jn(e);if(e instanceof Ue)return vn(e);if(e instanceof c)return On(e);if(e instanceof xe)return bn(e);if(e instanceof Set)return`//js(Set(${[...e].map(B).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return kn(e)}function yn(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function bn(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+B(i)+", "+B(n)+")",r=!1}),t+"])"}function kn(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${B(s)}: ${B(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function On(e){let t=Object.keys(e).map(r=>{let n=B(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Ln(e){return`[${e.toArray().map(B).join(", ")}]`}function vn(e){return`<<${Array.from(e.buffer).join(", ")}>>`}function jn(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function He(e){return Ht(e)}function R(e){return Gt(e)}function qn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=g(i,n)}}}function M(e){return qn(e,u([]))}function Tn(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head;e=n.tail,t=i,r=g(i(o),s)}}}function N(e,t){return Tn(e,t,u([]))}function Cn(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return M(l);{let f=i.head,a=i.tail,h=g(s(f,o),l);e=a,t=s,r=o+1,n=h}}}function Je(e,t){return Cn(e,t,0,u([]))}function Nn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=g(i,n)}}}function ie(e,t){return Nn(M(e),t)}function se(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Ve(e){return e}function oe(e){return e}function sr(e,t){return Jt(e,t)}function kt(e,t){if(t==="")return gt(e);{let n=Ve(e),i=sr(n,t);return N(i,oe)}}function Ot(e){let t=B(e);return oe(t)}function ur(e){return Yt(e)}function vt(e){let r=Ot(e);return Kt(r),e}var ke=class extends c{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function Yn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return M(n);{let i=r.head,s=r.tail,o=i===""||i==="."?n:i===".."&&n.hasLength(0)?u([]):i===".."&&n.atLeastLength(1)?n.tail:g(i,n);e=s,t=o}}}function Kn(e){return Yn(e,u([]))}function cr(e){return Kn(kt(e,"/"))}function Oe(e,t,r){return e?t:r()}var Le=class extends c{constructor(t){super(),this.all=t}};function H(e){return new Le(u([(t,r)=>e(t)]))}function At(){return new Le(u([]))}function ar(e){return new Le(se(e,u([]),(t,r)=>{let n=r.all;return ie(t,n)}))}var ve=class extends c{constructor(t){super(),this.content=t}},w=class extends c{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}};var je=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Ee=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function ue(e,t){return new je(e,t,!1)}function dr(e,t){return new Ee("on"+e,t)}function p(e){return ue("class",e)}function St(e){return ue("id",e)}function mr(e){return ue("value",e)}function hr(e){return ue("name",e)}function _r(e){return ue("for",e)}function xr(e){return ue("href",e)}function $(e,t,r){return e==="area"?new w("","",e,t,u([]),!1,!0):e==="base"?new w("","",e,t,u([]),!1,!0):e==="br"?new w("","",e,t,u([]),!1,!0):e==="col"?new w("","",e,t,u([]),!1,!0):e==="embed"?new w("","",e,t,u([]),!1,!0):e==="hr"?new w("","",e,t,u([]),!1,!0):e==="img"?new w("","",e,t,u([]),!1,!0):e==="input"?new w("","",e,t,u([]),!1,!0):e==="link"?new w("","",e,t,u([]),!1,!0):e==="meta"?new w("","",e,t,u([]),!1,!0):e==="param"?new w("","",e,t,u([]),!1,!0):e==="source"?new w("","",e,t,u([]),!1,!0):e==="track"?new w("","",e,t,u([]),!1,!0):e==="wbr"?new w("","",e,t,u([]),!1,!0):new w("","",e,t,r,!1,!1)}function D(e){return new ve(e)}var Ke=class extends c{constructor(t){super(),this[0]=t}},U=class extends c{constructor(t){super(),this[0]=t}};var X=class extends c{};var Xe=class extends c{constructor(t){super(),this[0]=t}};function Tt(e,t,r,n=!1){let i,s=[{prev:e,next:t,parent:e.parentNode}];for(;s.length;){let{prev:o,next:l,parent:f}=s.pop();if(l.subtree!==void 0&&(l=l.subtree()),l.content!==void 0)if(o)if(o.nodeType===Node.TEXT_NODE)o.textContent!==l.content&&(o.textContent=l.content),i??=o;else{let a=document.createTextNode(l.content);f.replaceChild(a,o),i??=a}else{let a=document.createTextNode(l.content);f.appendChild(a),i??=a}else if(l.tag!==void 0){let a=mi({prev:o,next:l,dispatch:r,stack:s,isComponent:n});o?o!==a&&f.replaceChild(a,o):f.appendChild(a),i??=a}else l.elements!==void 0?le(l,a=>{s.unshift({prev:o,next:a,parent:f}),o=o?.nextSibling}):l.subtree!==void 0&&s.push({prev:o,next:l,parent:f})}return i}function mi({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(Ae.has(o))l=Ae.get(o);else{let k=new Map;Ae.set(o,k),l=k}let f=s?new Set(l.keys()):null,a=s?new Set(Array.from(e.attributes,k=>k.name)):null,h=null,C=null,j=null;for(let k of t.attrs){let _=k[0],S=k[1];if(k.as_property)o[_]!==S&&(o[_]=S),s&&a.delete(_);else if(_.startsWith("on")){let G=_.slice(2),it=r(S);l.has(G)||o.addEventListener(G,Se),l.set(G,it),s&&f.delete(G)}else if(_.startsWith("data-lustre-on-")){let G=_.slice(15),it=r(hi);l.has(G)||o.addEventListener(G,Se),l.set(G,it),o.setAttribute(_,S)}else _==="class"?h=h===null?S:h+" "+S:_==="style"?C=C===null?S:C+S:_==="dangerous-unescaped-html"?j=S:(o.getAttribute(_)!==S&&o.setAttribute(_,S),(_==="value"||_==="selected")&&(o[_]=S),s&&a.delete(_))}if(h!==null&&(o.setAttribute("class",h),s&&a.delete("class")),C!==null&&(o.setAttribute("style",C),s&&a.delete("style")),s){for(let k of a)o.removeAttribute(k);for(let k of f)l.delete(k),o.removeEventListener(k,Se)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(j!==null)return o.innerHTML=j,o;let E=o.firstChild,de=null,Bt=null,Mt=null,nt=t.children[Symbol.iterator]().next().value;s&&nt!==void 0&&nt.key!==void 0&&nt.key!==""&&(de=new Set,Bt=wr(e),Mt=wr(t));for(let k of t.children)le(k,_=>{_.key!==void 0&&de!==null?E=_i(E,_,o,n,Mt,Bt,de):(n.unshift({prev:E,next:_,parent:o}),E=E?.nextSibling)});for(;E;){let k=E.nextSibling;o.removeChild(E),E=k}return o}var Ae=new WeakMap;function Se(e){let t=e.currentTarget;if(!Ae.has(t)){t.removeEventListener(e.type,Se);return}let r=Ae.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Se);return}r.get(e.type)(e)}function hi(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let f=0,a=s,h=e;f<l.length;f++)f===l.length-1?a[l[f]]=h[l[f]]:(a[l[f]]??={},h=h[l[f]],a=a[l[f]]);return s},{data:n})}}function wr(e){let t=new Map;if(e)for(let r of e.children)le(r,n=>{let i=n?.key||n?.getAttribute?.("data-lustre-key");i&&t.set(i,n)});return t}function _i(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let f=e.nextSibling;r.removeChild(e),e=f}if(s.size===0)return le(t,f=>{n.unshift({prev:e,next:f,parent:r}),e=e?.nextSibling}),e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let f=document.createTextNode("");return r.insertBefore(f,e),n.unshift({prev:f,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function le(e,t){if(e.elements!==void 0)for(let r of e.elements)le(r,t);else e.subtree!==void 0?le(e.subtree(),t):t(e)}var Ze=class e{#e=null;#r=[];#t=[];#n=!1;#o=!1;#i=null;#u=null;#s=null;static start(t,r,n,i,s){if(!ce())return new m(new fe);let o=r instanceof HTMLElement?r:document.querySelector(r);if(!o)return new m(new Qe(r));let l=new e(n(t),i,s,o);return new d(f=>l.send(f))}constructor([t,r],n,i,s=document.body,o=!1){this.#i=t,this.#u=n,this.#s=i,this.#e=s,this.#t=r.all.toArray(),this.#n=!0,this.#o=o,window.requestAnimationFrame(()=>this.#l())}send(t){switch(!0){case t instanceof U:{this.#r.push(t[0]),this.#l();return}case t instanceof X:{this.#a();return}case t instanceof Ke:{this.#f(t[0]);return}default:return}}emit(t,r){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:r,composed:!0}))}#l(){if(this.#c(),this.#n){let t=this.#s(this.#i),r=n=>i=>{let s=n(i);s instanceof d&&this.send(new U(s[0]))};this.#n=!1,this.#e=Tt(this.#e,t,r,this.#o)}}#c(t=0){for(;this.#r.length;){let[r,n]=this.#u(this.#i,this.#r.shift());this.#n||=this.#i!==r,this.#i=r,this.#t=this.#t.concat(n.all.toArray())}for(;this.#t.length;)this.#t.shift()(r=>this.send(new U(r)),(r,n)=>this.emit(r,n));this.#r.length&&(t<5?this.#c(++t):window.requestAnimationFrame(()=>this.#l()))}#f(t){switch(!0){case t instanceof Xe:{let r=this.#s(t[0]),n=i=>s=>{let o=i(s);o instanceof d&&this.send(new U(o[0]))};this.#r=[],this.#t=[],this.#n=!1,this.#e=Tt(this.#e,r,n,this.#o)}}}#a(){this.#e.remove(),this.#e=null,this.#i=null,this.#r=[],this.#t=[],this.#n=!1,this.#u=()=>{},this.#s=()=>{}}},gr=(e,t,r)=>Ze.start(r,t,e.init,e.update,e.view),ce=()=>globalThis.window&&window.document;var Ct=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Qe=class extends c{constructor(t){super(),this.selector=t}},fe=class extends c{};function yr(e,t,r){return new Ct(e,t,r,new y)}function br(e,t,r){return Oe(!ce(),new m(new fe),()=>gr(e,t,r))}function P(e){return D(e)}function Or(e,t){return $("h1",e,t)}function Lr(e,t){return $("h2",e,t)}function vr(e,t){return $("nav",e,t)}function b(e,t){return $("div",e,t)}function jr(e,t){return $("li",e,t)}function Er(e,t){return $("p",e,t)}function Ar(e,t){return $("ul",e,t)}function Sr(e,t){return $("a",e,t)}function qr(e,t){return $("table",e,t)}function Tr(e,t){return $("tbody",e,t)}function et(e,t){return $("td",e,t)}function Cr(e,t){return $("th",e,t)}function Nr(e,t){return $("thead",e,t)}function Nt(e,t){return $("tr",e,t)}function Z(e,t){return $("button",e,t)}function zr(e,t){return $("form",e,t)}function Ir(e,t){return $("label",e,t)}function Fr(e,t){return $("option",e,u([D(t)]))}function Br(e,t){return $("select",e,t)}function $i(e,t){return dr(e,t)}function ae(e){return $i("click",t=>new d(e))}var gi={handle_external_links:!1,handle_internal_links:!0},ka=window?.location?.href;var zt=(e,t=gi)=>{document.addEventListener("click",r=>{let n=Dr(r.target);if(n)try{let i=new URL(n.href),s=Mr(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=Mr(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var Dr=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:Dr(e.parentElement),Mr=e=>new ke(e.protocol?new O(e.protocol.slice(0,-1)):new y,new y,e.hostname?new O(e.hostname):new y,e.port?new O(Number(e.port)):new y,e.pathname,e.search?new O(e.search.slice(1)):new y,e.hash?new O(e.hash.slice(1)):new y);function Ur(e){return H(t=>Oe(!ce(),void 0,()=>zt(r=>{let i=e(r);return t(i)})))}function Pr(e,t){window.localStorage.setItem(e,String(t))}function Rr(e){let t=window.localStorage.getItem(e);return t?new d(t):new m(void 0)}function qe(e,t){let r=document.getElementById(e);r&&r.classList.add(t)}function tt(e,t){let r=document.getElementById(e);r&&r.classList.remove(t)}var pe=class extends c{},ze=class extends c{},rt=class extends c{},Te=class extends c{constructor(t,r){super(),this.id=t,this.label=r}},It=class extends c{constructor(t,r,n,i,s){super(),this.current_route=t,this.count=r,this.current_task=n,this.task_options=i,this.work_items=s}};var Ie=class extends c{},Fe=class extends c{},Be=class extends c{},Q=class extends c{constructor(t){super(),this[0]=t}},Me=class extends c{},Ce=class extends c{},Ft=class extends c{},Ne=class extends c{constructor(t,r,n){super(),this.url=t,this.title=r,this.route=n}};function bi(e){let t=cr(e.path);return t.hasLength(1)&&t.head==="work-items"?new Q(new ze):t.hasLength(1)&&t.head==="analytics"?new Q(new rt):new Q(new pe)}function ki(){return b(u([]),u([Or(u([p("text-3xl")]),u([D("Time tracker")])),Er(u([]),u([D("A small app to track your time spent on work items.")]))]))}function Wr(){return b(u([p("border-b-2 border-b-surface-0")]),u([]))}function Oi(e){return b(u([p("w-full h-8 flex flex-col justify-center")]),u([vr(u([p("w-full")]),u([Ar(u([p("flex w-full")]),N(e,r=>jr(u([p("mx-auto")]),u([Sr(u([xr(r.url)]),u([P(r.title)]))]))))]))]))}function Li(){return Z(u([p("rounded-full h-4/5 aspect-square bg-green-500 hover:bg-green-600 duration-200 border-[3px] border-green-900 flex items-center justify-center")]),u([b(u([p("ml-2 border-t-[15px] border-t-transparent border-b-transparent w-0 h-0 border-b-[15px] border-l-[25px] border-white")]),u([]))]))}function vi(e){return b(u([]),u([b(u([p("flex gap-4")]),u([Z(u([ae(new Ie)]),u([D("+")])),D(R(e.count)),Z(u([ae(new Fe)]),u([D("-")]))])),b(u([p("w-full")]),u([Z(u([ae(new Be)]),u([D("Reset")]))])),b(u([p("w-full h-32 rounded-lg bg-surface-0 flex px-8 py-2 items-center")]),u([b(u([p("mx-auto flex-col")]),u([zr(u([p("flex flex-col")]),u([b(u([p("flex gap-2")]),u([Ir(u([_r("work-item")]),u([P("Work item")])),Br(u([hr("selected-work-item"),St("work-item"),p("text-bg")]),(()=>{let t=u(["A","B","C"]);return N(t,r=>Fr(u([mr(r)]),r))})())]))]))])),Li()]))]))}function ji(e){let t=(()=>{let n=u(["ID","Label","Action"]);return N(n,i=>Cr(u([]),u([P(i)])))})(),r=(()=>{let n=e.work_items;return Je(n,(i,s)=>{let o=_e(s,2)===0?"":"bg-surface-1";return Nt(u([p(o)]),u([et(u([p("text-center")]),u([P(i.id)])),et(u([p("text-center")]),u([P(i.label)])),et(u([p("text-center")]),u([P("")]))]))})})();return qr(u([p("w-full table-auto rounded-md")]),u([Nr(u([p("rounded-md")]),u([Nt(u([p("bg-surface-1 text-white rounded-md")]),t)])),Tr(u([]),r)]))}function Ei(e){return b(u([St("modal-add-work-item"),p("bg-bg transition-opacity ease-in opacity-100 duration-500 absolute top-0 left-0 w-screen h-screen overflow-hidden hidden z-1 flex flex-col")]),u([b(u([p("w-full h-full relative")]),u([b(u([p("max-w-5xl w-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-surface-1 rounded-lg flex flex-col p-4")]),u([Lr(u([p("text-xl font-semibold")]),u([P("Add new work item")])),b(u([p("h-64")]),u([])),Z(u([p("h-8 rounded-lg bg-red-400 text-bg"),ae(new Ft)]),u([P("Cancel")]))]))]))]))}function Ai(e){return b(u([p("flex flex-col gap-4")]),u([ji(e),Z(u([p("bg-catp-green w-full h-8 rounded-lg text-bg"),ae(new Me)]),u([P("Add new item")]))]))}function Si(e){return b(u([]),u([]))}function qi(e){let t=u([new Ne("/","Tracker",new pe),new Ne("/work-items","Work Items",new ze),new Ne("/analytics","Analytics",new rt)]),r=(()=>{let n=e.current_route;return n instanceof pe?vi(e):n instanceof ze?Ai(e):Si(e)})();return b(u([p("text-white container mx-auto max-w-5xl mt-8 flex flex-col gap-4")]),u([ki(),Wr(),Oi(t),Wr(),r,Ei(e)]))}function Ti(){return tt("modal-add-work-item","block"),tt("modal-add-work-item","opacity-90"),qe("modal-add-work-item","hidden"),qe("modal-add-work-item","opacity-100")}function Ci(e){let t=R(e.count);return vt("Writing model to local storage: count="+t),Pr("count",t)}function Ni(e,t){let r=(()=>{if(t instanceof Ie)return e.withFields({count:e.count+1});if(t instanceof Fe)return e.count>1?e.withFields({count:e.count-1}):e.withFields({count:0});if(t instanceof Be)return e.withFields({count:0});if(t instanceof Me)return e;if(t instanceof Q){let s=t[0];return ur("On route change triggered"),e.withFields({current_route:s})}else return t instanceof Ce,e})(),n=s=>Ci(r),i=t instanceof Ie?H(n):t instanceof Fe?H(n):t instanceof Be?H(n):t instanceof Me?H(s=>(vt("Modal opened"),s(new Ce))):t instanceof Q?At():t instanceof Ce?H(s=>(tt("modal-add-work-item","hidden"),qe("modal-add-work-item","block"),qe("modal-add-work-item","opacity-90"))):H(s=>Ti());return[r,i]}function zi(e){let t=(()=>{let i=Rr("count");if(i.isOk()){let s=i[0],o=He(s);return o.isOk()?o[0]:0}else return 0})(),r=u([new Te("hi","Hi"),new Te("bye","Bye"),new Te("ciao","Ciao")]),n=ar(u([Ur(bi)]));return[new It(new pe,t,"",u([]),r),n]}function Hr(){let e=yr(zi,Ni,qi),t=br(e,"#app",void 0);if(!t.isOk())throw ot("assignment_no_match","timetracker_gleam",358,"main","Assignment pattern did not match",{value:t})}Hr();
